<!--
* Start Bootstrap - Shop Homepage v5.0.6 (https://startbootstrap.com/template/shop-homepage)
* Copyright 2013-2023 Start Bootstrap
* Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-shop-homepage/blob/master/LICENSE)
-->
<!--
 * Bootstrap  v5.2.3 (https://getbootstrap.com/)
 * Copyright 2011-2022 The Bootstrap Authors
 * Copyright 2011-2022 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
-->
{% extends "layout.html" %}

{% block title %}
    Add new products
{% endblock %}

{% block content %}

    <div class="card border-dark bg-white text-dark" style="width: 400px; height: fit-content; margin :10px auto;">
        <div class="card-header">
            <h3>Add new products</h3>
        </div>
        <div class="card-body">
            <form action="/add" method="post" enctype="multipart/form-data" id="register-form">
                <div class="mb-3">
                    <input type="file" class="form-control" name="image" accept="image/*">
                </div>
                {% with messages = get_flashed_messages(with_categories=True) %}                    
                    {% for category, message in messages %}
                        {% if message and category == 'image_error' %}
                            <div class="alert alert-danger mx-auto" role="alert" style="width : 90%">
                                {{ message }}
                            </div>
                        {% endif %}
                    {% endfor %}                    
                {% endwith %}  
                <div class="mb-3">
                    <input autocomplete="off" autofocus type="text" class="form-control" name="product_name" placeholder="Product name">
                </div>
                {% with messages = get_flashed_messages(category_filter=["product_name_error"]) %}                                   
                    {% for message in messages %}
                        {% if message %}
                            <div class="alert alert-danger mx-auto" role="alert" style="width : 90%">
                                {{ message }}
                            </div>
                        {% endif %}
                    {% endfor %}                                     
                {% endwith %}
                <div class="mb-3">
                    <input autocomplete="off" autofocus type="text" class="form-control" name="description" placeholder="Description">
                </div>
                {% with messages = get_flashed_messages(with_categories=True) %}                    
                    {% for category, message in messages %}
                        {% if message and category == 'description_error' %}
                            <div class="alert alert-danger mx-auto" role="alert" style="width : 90%">
                                {{ message }}
                            </div>
                        {% endif %}
                    {% endfor %}                    
                {% endwith %} 
                <div class="mb-3">
                    <input autocomplete="off" autofocus type="number" class="form-control" name="quantity" placeholder="Stock">
                </div>
                {% with messages = get_flashed_messages(with_categories=True) %}                    
                    {% for category, message in messages %}
                        {% if message and category == 'quantity_error' %}
                            <div class="alert alert-danger mx-auto" role="alert" style="width : 90%">
                                {{ message }}
                            </div>
                        {% endif %}
                    {% endfor %}                    
                {% endwith %}
                <div class="mb-3">
                    <input autocomplete="off" autofocus type="number" class="form-control" name="price" placeholder="Price">
                </div>
                {% with messages = get_flashed_messages(with_categories=True) %}                    
                    {% for category, message in messages %}
                        {% if message and category == 'price_error' %}
                            <div class="alert alert-danger mx-auto" role="alert" style="width : 90%">
                                {{ message }}
                            </div>
                        {% endif %}
                    {% endfor %}                    
                {% endwith %}         
                <div class="col text-center">
                    <button type="submit" class="btn btn-primary">Register</button>
                </div>
                <div class="mt-2" id="loading-indicator" style="display: none;">
                    <p>Loading...</p>
                </div>
            </form>
        </div>
    </div>
    <script src="/static/loading.js"></script>
{% endblock %}
